# Cesium Shader 实战练手示例（效果导向，从易到难）
为你整理了**分阶段、易上手**的 Cesium Shader 练手示例，覆盖基础纹理、动态效果、3D 空间计算、交互联动四大维度，每个示例只描述最终效果和核心目标，你可以从简单到复杂逐步实现，贴合新手学习节奏。

## 一、基础入门级（掌握 UV/颜色/基础函数）
### 1. 纯色渐变背景（矩形/球体）
- **效果**：在 Cesium 矩形实体上实现「从红到蓝的线性渐变」，渐变方向可通过参数控制（水平/垂直/对角线）；
- **核心目标**：掌握 `materialInput.st`（UV 坐标）、`mix` 函数、颜色插值，理解 UV 0~1 范围的映射关系。

### 2. 网格纹理（贴地/悬浮）
- **效果**：在地形上渲染 100m×100m 的黑白网格，网格线宽度可调节，超出范围的区域透明；
- **核心目标**：掌握 `mod` 函数（取模）、`step`/`smoothstep` 函数，实现重复纹理，理解 Cesium 贴地实体的 UV 映射规则。

### 3. 呼吸灯效果（点/圆形）
- **效果**：在指定经纬度位置渲染一个圆形光斑，半径随时间「扩大-缩小」循环（呼吸效果），透明度同步变化；
- **核心目标**：掌握 `uTime` 时间参数、`length` 函数（计算距离）、`sin/cos` 周期函数，实现基础动态效果。

## 二、进阶动态级（掌握时间/旋转/纹理采样）
### 1. 流动线条（Polyline 材质）
- **效果**：给 Cesium 折线添加「彩色流动纹理」，线条上有一条高亮带以固定速度从起点向终点移动，支持调整流动速度和高亮带宽度；
- **核心目标**：掌握折线的 UV 特性（t 轴沿线条方向）、纹理偏移、`fract` 函数（取小数），理解动态纹理的实现逻辑。

### 2. 旋转扇形（雷达基础）
- **效果**：在圆形实体上渲染一个 90° 扇形，扇形绕中心逆时针旋转，边缘有渐变过渡（避免硬边），旋转速度可调节；
- **核心目标**：掌握 2D 旋转矩阵、`atan`/`acos` 角度计算、`clamp` 函数，理解极坐标与 UV 坐标的转换。

### 3. 视频纹理适配（矩形/球体）
- **效果**：将本地视频渲染到 Cesium 球体上，实现视频「等比例缩放」「居中显示」，且视频播放时画面实时同步；
- **核心目标**：掌握 `sampler2D` 纹理采样、`texture2D` 函数、UV 缩放/偏移，理解视频纹理的动态更新机制。

## 三、3D 空间级（掌握 3D 坐标/球面计算）
### 1. 半圆球雷达扫描（3D 波束）
- **效果**：在指定位置渲染一个上半球（半圆球），半球内有一条「扇形波束」绕 Y 轴旋转扫描，波束宽度可调节，边缘有衰减效果；
- **核心目标**：掌握球面坐标（极角/方位角）计算、3D 坐标映射、半球范围约束，理解 2D UV 到 3D 空间的转换。

### 2. 高度着色（地形/模型）
- **效果**：根据地形高度给地表着色——低于 0m 显示蓝色，0~500m 显示绿色，500~1000m 显示黄色，高于 1000m 显示红色，颜色过渡平滑；
- **核心目标**：掌握 `czm_height` 内置变量（地形高度）、`smoothstep` 平滑插值，理解 Cesium 地形相关的内置 uniform 变量。

### 3. 距离衰减（点光源效果）
- **效果**：以指定坐标为中心，渲染一个「圆形发光区域」，距离中心越远，亮度/透明度越低，超出指定半径后完全透明；
- **核心目标**：掌握 3D 空间距离计算、`pow` 函数（衰减曲线），理解 Cesium 笛卡尔坐标与 UV 的映射。

## 四、交互联动级（结合 Cesium 交互/多参数控制）
### 1. 鼠标拾取着色
- **效果**：鼠标点击 Cesium 实体（如矩形/球体）时，点击位置出现「高亮圆点」，圆点随鼠标移动而移动，且圆点大小可调节；
- **核心目标**：掌握 Cesium 鼠标拾取（屏幕坐标转世界坐标）、uniform 参数动态更新，理解 Shader 与 JS 交互传参。

### 2. 多参数联动雷达
- **效果**：雷达扫描的「旋转速度」「波束宽度」「颜色」可通过 JS 滑块实时调节，调节后 Shader 效果立即更新，无需重新创建实体；
- **核心目标**：掌握自定义 uniform 参数、`definitionChanged` 事件触发，理解动态参数传递的完整流程。

### 3. 纹理+动态效果叠加
- **效果**：在视频纹理的基础上，叠加「扫描线效果」——一条水平线条以固定速度从下到上移动，扫描线经过的区域视频画面高亮，支持调节扫描线速度和高亮强度；
- **核心目标**：掌握多效果叠加、颜色混合（`mix`/`add`），理解 Shader 中多逻辑的分层实现。

## 五、练手建议（新手友好）
1. **先复刻后创新**：每个示例先实现基础效果，再尝试修改参数（如把线性渐变改成径向渐变、把旋转扇形改成双波束）；
2. **拆解核心逻辑**：比如「旋转扇形」先实现静态扇形，再添加时间参数实现旋转，最后优化边缘渐变，分步突破；
3. **聚焦单一知识点**：每个示例只练 1~2 个核心函数/概念（如「网格纹理」只练 `mod`+`step`，「呼吸灯」只练 `sin`+`length`），避免贪多。

## 总结
### 核心练手路径
1. 基础层（UV/颜色/函数）→ 2. 动态层（时间/旋转/纹理）→ 3. 空间层（3D 坐标/球面计算）→ 4. 交互层（参数联动/鼠标交互）；
2. 每个示例的核心是「理解 Cesium 实体的 UV 映射规则」+「GLSL 基础函数的灵活运用」，这也是 Cesium Shader 开发的核心基础。

如果某个效果你想先理清实现思路（比如「半圆球雷达扫描」的 3D 坐标转换逻辑），可以告诉我，我会补充该效果的**核心思路拆解**（无代码，只讲步骤和关键函数）。